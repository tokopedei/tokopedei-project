{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Ecommerce-Project\\\\front-end\\\\src\\\\components\\\\auth\\\\signup\\\\SignUp.jsx\",\n    _s = $RefreshSig$();\n\nimport './SignUp.css';\nimport './SignUpQueries.css';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { IoPowerSharp } from 'react-icons/io5';\nimport StepOne from './stepOne/StepOne';\nimport StepTwo from './stepTwo/StepTwo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignUp = () => {\n  _s();\n\n  const [obj, setObj] = useState({});\n  const [activeStep, setActiveStep] = useState(0);\n  const [spinnerState, setSpinnerState] = useState(false);\n  const [errMsgId, setErrMsgId] = useState('');\n  const [errMsgEmail, setErrMsgEmail] = useState('');\n  const [errMsgPsw, setErrMsgPsw] = useState('');\n  const [errMsgVrfPsw, setErrMsgVrfPsw] = useState('');\n  const [errMsgFname, setErrMsgFname] = useState('');\n  const [errMsgLname, setErrMsgLname] = useState('');\n  const [errMsgCity, setErrMsgCity] = useState('');\n  const [errMsgStreet, setErrMsgStreet] = useState('');\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const axios = require('axios');\n\n  const accountValid = e => {\n    // First form validation\n    e.preventDefault();\n    setErrMsgFname('');\n\n    if (e.target.id && e.target.id.value.length === 9) {\n      // id validation\n      if (/\\S+@\\S+\\.\\S+/.test(e.target.email.value)) {\n        // email validation\n        if (/.{6,}/.test(e.target.password.value)) {\n          // password validation\n          if (e.target.password.value === e.target.verifyPassword.value) {\n            // compare between two passwords\n            dispatch({\n              type: 'SET_REGISTER_STEPS_DATA',\n              registerStepsData: {\n                id: e.target.id.value,\n                email: e.target.email.value,\n                password: e.target.password.value\n              }\n            });\n            verifyData(e.target.id.value, e.target.email.value, e.target.password.value);\n            return;\n          } else {\n            setErrMsgVrfPsw('Kata Sandi tidak cocok!');\n          }\n        } else {\n          setErrMsgPsw('Kata Sandi harus berisi setidaknya 6 karakter');\n        }\n      } else {\n        setErrMsgEmail('Mohon masukkan email yang valid!');\n      }\n    } else {\n      setErrMsgId('Nomor ID berisi 16 karakter');\n    }\n  };\n\n  const personalValid = e => {\n    // Second form validation\n    e.preventDefault();\n\n    if (e.target.fname && e.target.fname.value) {\n      // first name validation\n      if (e.target.lname.value) {\n        // last name validation\n        if (e.target.city.value) {\n          // city validation\n          if (e.target.street.value) {\n            // street validation\n            createAccount(e.target.fname.value, e.target.lname.value, e.target.city.value, e.target.street.value);\n            return;\n          } else {\n            setErrMsgStreet('Masukkan alamat Anda');\n          }\n        } else {\n          setErrMsgCity('Pilih provinsi Anda');\n        }\n      } else {\n        setErrMsgLname('Masukkan nama belakang Anda');\n      }\n    } else {\n      setErrMsgFname('Masukkan nama depan Anda');\n    }\n  };\n\n  const verifyData = async (id, email, password) => {\n    // Verify new account function\n    try {\n      setSpinnerState(true);\n      const res = await axios.post('http://localhost:3001/users', {\n        id: id,\n        email: email\n      });\n      setSpinnerState(false);\n\n      if (res.data.status === '200') {\n        setObj({\n          id: id,\n          email: email,\n          password: password\n        });\n        setActiveStep(1);\n      } else if (res.data.status === '409' && res.data.data === 'Email sudah terdaftar') {\n        setErrMsgEmail(res.data.data);\n      } else if (res.data.status === '409' && res.data.data === 'ID sudah terdaftar') {\n        setErrMsgId(res.data.data);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const createAccount = async (fname, lname, city, street) => {\n    // Create new account function\n    try {\n      setSpinnerState(true);\n      const res = await axios.post('http://localhost:3001/user', { ...obj,\n        fname: fname,\n        lname: lname,\n        city: city,\n        street: street\n      });\n      setSpinnerState(false);\n\n      if (res.data.status === '200') {\n        history.push('/i/login');\n        dispatch({\n          type: 'SET_REGISTER_STEPS_DATA',\n          registerStepsData: {\n            id: '',\n            email: '',\n            password: ''\n          }\n        });\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const getStepContent = step => {\n    // Stepper handler function\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(StepOne, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 24\n        }, this);\n\n      case 1:\n        return /*#__PURE__*/_jsxDEV(StepTwo, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 24\n        }, this);\n\n      default:\n        return 'Terjadi Kesalahan';\n    }\n  };\n\n  useEffect(() => {\n    dispatch({\n      type: 'SET_ERR_MSG_REGISTER',\n      errMsgRegister: {\n        errMsgId,\n        setErrMsgId,\n        errMsgEmail,\n        setErrMsgEmail,\n        errMsgPsw,\n        setErrMsgPsw,\n        errMsgVrfPsw,\n        setErrMsgVrfPsw,\n        errMsgFname,\n        setErrMsgFname,\n        errMsgLname,\n        setErrMsgLname,\n        errMsgCity,\n        setErrMsgCity,\n        errMsgStreet,\n        setErrMsgStreet\n      }\n    });\n  }, [dispatch, errMsgId, errMsgEmail, errMsgPsw, errMsgVrfPsw, errMsgFname, errMsgLname, errMsgCity, errMsgStreet]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"signup-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-box\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Daftar \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Tokopedei\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 28\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(IoPowerSharp, {\n            className: \"power-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 57\n          }, this), \"nline\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 51\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"signup-form\",\n      onSubmit: activeStep === 0 ? accountValid : personalValid,\n      children: [getStepContent(activeStep), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-box\",\n        children: [activeStep === 1 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-btn\",\n          type: \"button\",\n          onClick: () => setActiveStep(0),\n          children: \"Kembali\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this) : null, spinnerState ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner-box\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `spinner ${spinnerState}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bounce1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bounce2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bounce3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"progress-btn\",\n          type: \"submit\",\n          children: activeStep === 0 ? 'Next' : 'Sign Up'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Apakah Anda Sudah Memiliki Akun?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-link\",\n          type: \"button\",\n          onClick: () => {\n            history.push('/i/login');\n            dispatch({\n              type: 'SET_RESET_REGISTER_STEPS_DATA',\n              registerStepsData: {}\n            });\n          },\n          children: \"Masuk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignUp, \"bcxe7l4MzYHiVn+ZM37hv42qWjk=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["C:/xampp/htdocs/Ecommerce-Project/front-end/src/components/auth/signup/SignUp.jsx"],"names":["React","useEffect","useState","useHistory","useDispatch","IoPowerSharp","StepOne","StepTwo","SignUp","obj","setObj","activeStep","setActiveStep","spinnerState","setSpinnerState","errMsgId","setErrMsgId","errMsgEmail","setErrMsgEmail","errMsgPsw","setErrMsgPsw","errMsgVrfPsw","setErrMsgVrfPsw","errMsgFname","setErrMsgFname","errMsgLname","setErrMsgLname","errMsgCity","setErrMsgCity","errMsgStreet","setErrMsgStreet","history","dispatch","axios","require","accountValid","e","preventDefault","target","id","value","length","test","email","password","verifyPassword","type","registerStepsData","verifyData","personalValid","fname","lname","city","street","createAccount","res","post","data","status","err","console","error","push","getStepContent","step","errMsgRegister"],"mappings":"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","sourcesContent":["import './SignUp.css';\r\nimport './SignUpQueries.css';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { IoPowerSharp} from 'react-icons/io5';\r\nimport StepOne from './stepOne/StepOne';\r\nimport StepTwo from './stepTwo/StepTwo';\r\n\r\nconst SignUp = () => {\r\n    const [obj, setObj] = useState({});\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [spinnerState, setSpinnerState] = useState(false);\r\n    const [errMsgId, setErrMsgId] = useState('');\r\n    const [errMsgEmail, setErrMsgEmail] = useState('');\r\n    const [errMsgPsw, setErrMsgPsw] = useState('');\r\n    const [errMsgVrfPsw, setErrMsgVrfPsw] = useState('');\r\n    const [errMsgFname, setErrMsgFname] = useState('');\r\n    const [errMsgLname, setErrMsgLname] = useState('');\r\n    const [errMsgCity, setErrMsgCity] = useState('');\r\n    const [errMsgStreet, setErrMsgStreet] = useState('');\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const axios = require('axios');\r\n\r\n    const accountValid = (e) => { // First form validation\r\n        e.preventDefault();\r\n        setErrMsgFname('');\r\n\r\n        if (e.target.id && e.target.id.value.length === 9) { // id validation\r\n            if (/\\S+@\\S+\\.\\S+/.test(e.target.email.value)) { // email validation\r\n                if (/.{6,}/.test(e.target.password.value)) { // password validation\r\n                    if (e.target.password.value === e.target.verifyPassword.value) { // compare between two passwords\r\n                        dispatch({\r\n                            type: 'SET_REGISTER_STEPS_DATA', \r\n                            registerStepsData: {\r\n                                id: e.target.id.value, \r\n                                email: e.target.email.value, \r\n                                password: e.target.password.value \r\n                            }\r\n                        });\r\n                        verifyData(e.target.id.value, e.target.email.value, e.target.password.value);\r\n                        return;\r\n                    } else {\r\n                        setErrMsgVrfPsw('Kata Sandi tidak cocok!');\r\n                    }\r\n                } else {\r\n                    setErrMsgPsw('Kata Sandi harus berisi setidaknya 6 karakter');\r\n                }\r\n            } else {\r\n                setErrMsgEmail('Mohon masukkan email yang valid!');\r\n            }\r\n        } else {\r\n            setErrMsgId('Nomor ID berisi 16 karakter');\r\n        }\r\n    }\r\n\r\n    const personalValid = (e) => { // Second form validation\r\n        e.preventDefault();\r\n    \r\n        if (e.target.fname && e.target.fname.value) { // first name validation\r\n            if (e.target.lname.value) { // last name validation\r\n                if (e.target.city.value) { // city validation\r\n                    if (e.target.street.value) { // street validation\r\n                        createAccount(e.target.fname.value, e.target.lname.value, e.target.city.value, e.target.street.value);\r\n                        return;\r\n                    } else {\r\n                        setErrMsgStreet('Masukkan alamat Anda');\r\n                    }\r\n                } else {\r\n                    setErrMsgCity('Pilih provinsi Anda');\r\n                }\r\n            } else {\r\n                setErrMsgLname('Masukkan nama belakang Anda');\r\n            }\r\n        } else {\r\n            setErrMsgFname('Masukkan nama depan Anda');\r\n        }\r\n    }\r\n\r\n    const verifyData = async (id, email, password) => { // Verify new account function\r\n        try {\r\n            setSpinnerState(true);\r\n            const res = await axios.post('http://localhost:3001/users', \r\n            {id: id, email: email});\r\n            setSpinnerState(false);\r\n\r\n            if (res.data.status === '200') {\r\n                setObj({id: id, email: email, password: password});\r\n                setActiveStep(1);\r\n            } else if (res.data.status === '409' && res.data.data === 'Email sudah terdaftar') {\r\n                setErrMsgEmail(res.data.data);\r\n            } else if (res.data.status === '409' && res.data.data === 'ID sudah terdaftar') {\r\n                setErrMsgId(res.data.data);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    const createAccount = async (fname, lname, city, street) => { // Create new account function\r\n        try {\r\n            setSpinnerState(true);\r\n            const res = await axios.post('http://localhost:3001/user', \r\n            {...obj, fname: fname, lname: lname, city: city, street: street});\r\n            setSpinnerState(false);\r\n            \r\n            if (res.data.status === '200') {\r\n                history.push('/i/login');\r\n                dispatch({\r\n                    type: 'SET_REGISTER_STEPS_DATA', \r\n                    registerStepsData: {\r\n                        id: '', \r\n                        email: '', \r\n                        password: '' \r\n                    }\r\n                });\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    const getStepContent = (step) => { // Stepper handler function\r\n        switch (step) {\r\n            case 0:\r\n                return <StepOne />;\r\n            case 1:\r\n                return <StepTwo />;\r\n            default:\r\n                return 'Terjadi Kesalahan';\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: 'SET_ERR_MSG_REGISTER', \r\n            errMsgRegister: {\r\n            errMsgId, setErrMsgId,\r\n            errMsgEmail, setErrMsgEmail,\r\n            errMsgPsw, setErrMsgPsw,\r\n            errMsgVrfPsw, setErrMsgVrfPsw,\r\n            errMsgFname, setErrMsgFname,\r\n            errMsgLname, setErrMsgLname,\r\n            errMsgCity, setErrMsgCity,\r\n            errMsgStreet, setErrMsgStreet\r\n        }});\r\n    }, [dispatch, \r\n        errMsgId,\r\n        errMsgEmail,\r\n        errMsgPsw,\r\n        errMsgVrfPsw,\r\n        errMsgFname,\r\n        errMsgLname,\r\n        errMsgCity,\r\n        errMsgStreet]);\r\n\r\n    return (\r\n        <div className='signup-container'>\r\n            <div className='header-box'>\r\n                <h1>Daftar <span>Tokopedei</span> <span><IoPowerSharp className='power-icon' />nline</span></h1>   \r\n            </div>\r\n\r\n            <form \r\n                className='signup-form' \r\n                onSubmit={activeStep === 0 ? accountValid : personalValid}\r\n            >\r\n                { getStepContent(activeStep) }\r\n\r\n                <div className='btn-box'>\r\n                    { activeStep === 1 ?\r\n                    <button \r\n                        className='back-btn'\r\n                        type='button'\r\n                        onClick={() => setActiveStep(0)}\r\n                    >\r\n                        Kembali\r\n                    </button> : null }\r\n\r\n                    { spinnerState ?\r\n                    <div className='spinner-box'>\r\n                        <div className={`spinner ${spinnerState}`}>\r\n                            <div className='bounce1'></div>\r\n                            <div className='bounce2'></div>\r\n                            <div className='bounce3'></div>\r\n                        </div>\r\n                    </div> \r\n                    : \r\n                    <button \r\n                        className='progress-btn'\r\n                        type='submit'\r\n                    >\r\n                        {activeStep === 0 ? 'Next' : 'Sign Up'}\r\n                    </button> }\r\n                </div>\r\n\r\n                <div className='login-box'>\r\n                    <span>Apakah Anda Sudah Memiliki Akun?</span> \r\n                    <button \r\n                        className='btn-link'\r\n                        type='button' \r\n                        onClick={() => {\r\n                            history.push('/i/login');\r\n                            dispatch({type: 'SET_RESET_REGISTER_STEPS_DATA', registerStepsData: {}});\r\n                        }}\r\n                    >\r\n                        Masuk\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}