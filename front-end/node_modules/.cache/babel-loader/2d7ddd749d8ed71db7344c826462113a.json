{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Ecommerce-Project\\\\front-end\\\\src\\\\components\\\\dashboard\\\\sideBar\\\\addProduct\\\\AddProduct.jsx\",\n    _s = $RefreshSig$();\n\nimport './AddProduct.css';\nimport React, { useState, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { IoImageOutline } from 'react-icons/io5';\nimport { GrPowerReset } from 'react-icons/gr';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddProduct = () => {\n  _s();\n\n  const [obj, setObj] = useState({});\n  const [previewSource, setPreviewSource] = useState('');\n  const [isSelect, setIsSelect] = useState(false);\n  const [isInput, setIsInput] = useState(false);\n  const [spinnerState, setSpinnerState] = useState(false);\n  const [errMsgImg, setErrMsgImg] = useState('');\n  const [errMsgProdName, setErrMsgProdName] = useState('');\n  const [errMsgCat, setErrMsgCat] = useState('');\n  const [errMsgNewCat, setErrMsgNewCat] = useState('');\n  const [errMsgPrice, setErrMsgPrice] = useState('');\n  const select = useRef(null);\n  const form = useRef(null);\n  const inputNewCategory = useRef(null);\n  const arr = useSelector(state => state.getCategories);\n  const dispatch = useDispatch();\n\n  const axios = require('axios');\n\n  const handleTextInputChange = e => {\n    // Input text validation\n    e.preventDefault();\n\n    if (e.target.productName.value !== '') {\n      // Product name validation\n      obj.productName = e.target.productName.value;\n    } else {\n      setErrMsgProdName('Masukkan nama produk');\n      delete obj.productName;\n    }\n\n    if (e.target.category.value) {\n      // Category validation\n      obj.categoryId = e.target.category.value;\n    } else if (!e.target.category.value && !/[a-zA-Z].{2,}/.test(e.target.newCategory.value && e.target.newCategory.value.length === 0)) {\n      setErrMsgCat('Pilih Kategori');\n      delete obj.categoryId;\n    }\n\n    if (e.target.newCategory.value.length > 0) {\n      // New Category validation\n      if (/[a-zA-Z].{2,}/.test(e.target.newCategory.value)) {\n        obj.newCategory = e.target.newCategory.value;\n      } else if (!/[a-zA-Z].{2,}/.test(e.target.newCategory.value) && !e.target.category.value) {\n        setErrMsgNewCat('Masukkan 3 kata atau lebih');\n        delete obj.newCategory;\n      }\n    } else if (e.target.newCategory.value.length === 0 && !e.target.category.value) {\n      setErrMsgNewCat('Masukkan nama kategori baru');\n      delete obj.newCategory;\n    }\n\n    if (e.target.price.value.length > 0) {\n      // Price validation\n      if (/^\\d*\\.?\\d{2}$/.test(e.target.price.value)) {\n        obj.price = e.target.price.value;\n      } else {\n        setErrMsgPrice('Masukkan nilai desimal!');\n        delete obj.price;\n      }\n    } else {\n      setErrMsgPrice('Masukkan nilai harga!');\n      delete obj.price;\n    }\n\n    if (!e.target.img.value) {\n      // Image validation\n      setErrMsgImg('Pilih gambar');\n    }\n\n    return isValid();\n  };\n\n  const handleFileInputChange = e => {\n    // Input file (img) validation\n    if (e.target.files[0]) {\n      if (/^.*\\.(jpg|JPG|png|PNG|jpeg|JPEG)$/.test(e.target.files[0].name)) {\n        e.target.setCustomValidity('');\n        const file = e.target.files[0];\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onloadend = () => {\n          if (file) {\n            setErrMsgImg('');\n            obj.img = reader.result;\n            previewFile(file);\n          }\n        };\n\n        reader.onerror = () => {\n          console.error('Gagal memuat gambar');\n        };\n      } else {\n        delete obj.img;\n        console.error('Format file yang didukung: JPG/JPEG dan PNG');\n      }\n    }\n  };\n\n  const previewFile = file => {\n    // Img preview function\n    if (file) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = () => {\n        setPreviewSource(reader.result);\n      };\n    }\n  };\n\n  const isValid = () => {\n    // Object validation function\n    if (Object.keys(obj).length === 4) {\n      if (obj.categoryId >= 0 && !obj.newCategory) {\n        addNewProduct(obj.productName, obj.categoryId, obj.price, obj.img);\n      } else if (obj.newCategory && !obj.categoryId) {\n        createCategory(obj.productName, obj.newCategory, obj.price, obj.img);\n      } else {\n        console.error('Terjadi Kesalahan');\n      }\n    }\n  };\n\n  const addNewProduct = async (productName, category, price, img) => {\n    // Fetch new product\n    try {\n      setSpinnerState(true);\n      const res = await axios.post('http://localhost:3001/product', {\n        productName: productName,\n        category: category,\n        price: price,\n        img: img\n      });\n      setSpinnerState(false);\n\n      if (res.data.status === '200') {\n        dispatch({\n          type: 'SET_REFETCH',\n          refetch: Math.random() * 2\n        });\n        setPreviewSource('');\n        setIsInput(false);\n        setIsSelect(false);\n        setObj({});\n        form.current.reset();\n      } else {\n        console.error('Terjadi Kesalahan');\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const createCategory = async (productName, newCategory, price, img) => {\n    // Fetch new category\n    try {\n      const res = await axios.post('http://localhost:3001/category', {\n        newCategory: newCategory\n      });\n      setSpinnerState(false);\n\n      if (res.data.status === '200') {\n        dispatch({\n          type: 'SET_CATEGORIES',\n          categories: res.data.categories\n        });\n        addNewProduct(productName, res.data.category, price, img);\n      } else {\n        setErrMsgNewCat(res.data.data);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"add-product-form\",\n    onSubmit: handleTextInputChange,\n    autoComplete: \"off\",\n    ref: form,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"img-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"img\",\n        id: \"img\",\n        className: \"input-file\",\n        accept: \"image/png, image/jpeg, image/jpg\",\n        onChange: handleFileInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this), previewSource ? /*#__PURE__*/_jsxDEV(\"figure\", {\n        className: \"img-preview-box\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"img\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: previewSource,\n            alt: \"Preview\",\n            title: \"Klik untuk memilih gambar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"placeholder-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(IoImageOutline, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"img\",\n          className: \"img-btn\",\n          children: \"Pilih Gambar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"err-msg\",\n        children: errMsgImg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-name-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"productName\",\n        children: \"Nama Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"productName\",\n        id: \"productName\",\n        placeholder: \"Contoh: Sepatu, Baju\",\n        onChange: e => {\n          if (errMsgProdName && e.target.value.length > 0) {\n            setErrMsgProdName('');\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"err-msg\",\n        children: errMsgProdName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"category\",\n        children: \"Pilih Kategori\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-box-wraper\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"category\",\n          id: \"category\",\n          defaultValue: \"\",\n          disabled: isSelect,\n          ref: select,\n          onChange: e => {\n            if (e.target.value.length > 0) {\n              setErrMsgCat('');\n              setErrMsgNewCat('');\n              setIsInput(true);\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            disabled: true,\n            hidden: true,\n            value: \"\",\n            children: \"Pilih Kategori\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }, this), arr.map(e => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              id: e.id,\n              value: e.id,\n              children: e.name\n            }, e.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 33\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"select-reset-btn\",\n          type: \"button\",\n          disabled: isSelect,\n          title: \"Klik untuk mereset\",\n          onClick: () => {\n            select.current.value = '';\n            setIsInput(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(GrPowerReset, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"err-msg\",\n        children: errMsgCat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-category-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"newCategory\",\n        children: \"Buat Kategori Baru\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"newCategory\",\n        id: \"newCategory\",\n        placeholder: \"contoh: Frozen\",\n        disabled: isInput,\n        ref: inputNewCategory,\n        onChange: e => {\n          if (e.target.value.length > 0) {\n            setErrMsgNewCat('');\n            setErrMsgCat('');\n            setIsSelect(true);\n          } else {\n            setIsSelect(false);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"err-msg\",\n        children: errMsgNewCat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"price-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"price\",\n        children: \"Harga Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"price\",\n        id: \"price\",\n        placeholder: \"contoh: IDR 1000\",\n        onChange: e => {\n          if (e.target.value.length > 0) {\n            setErrMsgPrice('');\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"err-msg\",\n        children: errMsgPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-box\",\n      children: spinnerState ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-box\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `spinner ${spinnerState}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bounce1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bounce2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bounce3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn-add\",\n        children: \"Tambah Produk\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddProduct, \"7WVT5R+kmdFT3sNJpkBJ5j+zWGw=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["C:/xampp/htdocs/Ecommerce-Project/front-end/src/components/dashboard/sideBar/addProduct/AddProduct.jsx"],"names":["React","useState","useRef","useSelector","useDispatch","IoImageOutline","GrPowerReset","AddProduct","obj","setObj","previewSource","setPreviewSource","isSelect","setIsSelect","isInput","setIsInput","spinnerState","setSpinnerState","errMsgImg","setErrMsgImg","errMsgProdName","setErrMsgProdName","errMsgCat","setErrMsgCat","errMsgNewCat","setErrMsgNewCat","errMsgPrice","setErrMsgPrice","select","form","inputNewCategory","arr","state","getCategories","dispatch","axios","require","handleTextInputChange","e","preventDefault","target","productName","value","category","categoryId","test","newCategory","length","price","img","isValid","handleFileInputChange","files","name","setCustomValidity","file","reader","FileReader","readAsDataURL","onloadend","result","previewFile","onerror","console","error","Object","keys","addNewProduct","createCategory","res","post","data","status","type","refetch","Math","random","current","reset","err","categories","map","id"],"mappings":"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","sourcesContent":["import './AddProduct.css';\r\nimport React, { useState, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { IoImageOutline } from 'react-icons/io5';\r\nimport { GrPowerReset } from 'react-icons/gr';\r\n\r\nconst AddProduct = () => {\r\n    const [obj, setObj] = useState({});\r\n    const [previewSource, setPreviewSource] = useState('');\r\n    const [isSelect, setIsSelect] = useState(false);\r\n    const [isInput, setIsInput] = useState(false);\r\n    const [spinnerState, setSpinnerState] = useState(false);\r\n    const [errMsgImg, setErrMsgImg] = useState('');\r\n    const [errMsgProdName, setErrMsgProdName] = useState('');\r\n    const [errMsgCat, setErrMsgCat] = useState('');\r\n    const [errMsgNewCat, setErrMsgNewCat] = useState('');\r\n    const [errMsgPrice, setErrMsgPrice] = useState('');\r\n    const select = useRef(null);\r\n    const form = useRef(null);\r\n    const inputNewCategory = useRef(null);\r\n    const arr = useSelector(state => state.getCategories);\r\n    const dispatch = useDispatch();\r\n    const axios = require('axios');\r\n\r\n    const handleTextInputChange = (e) => { // Input text validation\r\n        e.preventDefault();\r\n\r\n        if (e.target.productName.value !== '') { // Product name validation\r\n            obj.productName = e.target.productName.value;\r\n        } else {\r\n            setErrMsgProdName('Masukkan nama produk');\r\n            delete obj.productName;\r\n        }\r\n\r\n        if (e.target.category.value) { // Category validation\r\n            obj.categoryId = e.target.category.value;\r\n        } else if (!e.target.category.value \r\n            && !/[a-zA-Z].{2,}/.test(e.target.newCategory.value \r\n            && e.target.newCategory.value.length === 0)) {\r\n            setErrMsgCat('Pilih Kategori');\r\n            delete obj.categoryId;\r\n        }\r\n\r\n        if (e.target.newCategory.value.length > 0) { // New Category validation\r\n            if (/[a-zA-Z].{2,}/.test(e.target.newCategory.value)) {\r\n                obj.newCategory = e.target.newCategory.value;\r\n            } else if (!/[a-zA-Z].{2,}/.test(e.target.newCategory.value) && !e.target.category.value) {\r\n                setErrMsgNewCat('Masukkan 3 kata atau lebih');\r\n                delete obj.newCategory;\r\n            }\r\n        } else if (e.target.newCategory.value.length === 0 && !e.target.category.value) {\r\n            setErrMsgNewCat('Masukkan nama kategori baru');\r\n            delete obj.newCategory;\r\n        }\r\n    \r\n        if (e.target.price.value.length > 0) { // Price validation\r\n            if (/^\\d*\\.?\\d{2}$/.test(e.target.price.value)) {\r\n                obj.price = e.target.price.value;\r\n            } else {\r\n                setErrMsgPrice('Masukkan nilai desimal!');\r\n                delete obj.price;\r\n            }\r\n        } else {\r\n            setErrMsgPrice('Masukkan nilai harga!');\r\n            delete obj.price;\r\n        }\r\n        \r\n        if (!e.target.img.value) { // Image validation\r\n            setErrMsgImg('Pilih gambar');\r\n        }\r\n\r\n        return isValid();\r\n    }\r\n    \r\n\r\n    const handleFileInputChange = (e) => { // Input file (img) validation\r\n        if (e.target.files[0]) {\r\n            if (/^.*\\.(jpg|JPG|png|PNG|jpeg|JPEG)$/.test(e.target.files[0].name)) {\r\n                e.target.setCustomValidity('');\r\n\r\n                const file = e.target.files[0];\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(file);\r\n        \r\n                reader.onloadend = () => {\r\n                   if (file) {\r\n                    setErrMsgImg('');\r\n                    obj.img = reader.result;\r\n                    previewFile(file);\r\n                   }\r\n                }\r\n                \r\n                reader.onerror = () => {\r\n                    console.error('Gagal memuat gambar');\r\n                }    \r\n            } else {\r\n                delete obj.img;\r\n                console.error('Format file yang didukung: JPG/JPEG dan PNG');\r\n            }\r\n        }\r\n    }\r\n\r\n    const previewFile = (file) => { // Img preview function\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onloadend = () => {\r\n                setPreviewSource(reader.result);\r\n            }\r\n        }\r\n    }\r\n\r\n    const isValid = () => { // Object validation function\r\n        if (Object.keys(obj).length === 4) {\r\n            if (obj.categoryId >= 0 && !obj.newCategory) {\r\n                addNewProduct(\r\n                    obj.productName,\r\n                    obj.categoryId,\r\n                    obj.price,\r\n                    obj.img\r\n                );\r\n            } else if (obj.newCategory && !obj.categoryId) {\r\n                createCategory(\r\n                    obj.productName,\r\n                    obj.newCategory,\r\n                    obj.price,\r\n                    obj.img\r\n                );\r\n            } else {\r\n                console.error('Terjadi Kesalahan');\r\n            }\r\n        }\r\n    }\r\n\r\n    const addNewProduct = async (productName, category, price, img) => { // Fetch new product\r\n        try {\r\n            setSpinnerState(true);\r\n            const res = await axios.post('http://localhost:3001/product', \r\n            {productName: productName, category: category, price: price, img: img});\r\n            setSpinnerState(false);\r\n            \r\n            if (res.data.status === '200') {\r\n                dispatch({type: 'SET_REFETCH', refetch: Math.random() * 2});\r\n                setPreviewSource('');  \r\n                setIsInput(false);\r\n                setIsSelect(false);\r\n                setObj({});\r\n                form.current.reset();\r\n            } else {\r\n                console.error('Terjadi Kesalahan');\r\n            }  \r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    const createCategory = async (productName, newCategory, price, img) => { // Fetch new category\r\n        try {\r\n            const res = await axios.post('http://localhost:3001/category', \r\n            {newCategory: newCategory});\r\n            setSpinnerState(false);\r\n\r\n            if (res.data.status === '200') {\r\n                dispatch({type: 'SET_CATEGORIES', categories: res.data.categories});\r\n                addNewProduct(\r\n                    productName,\r\n                    res.data.category,\r\n                    price,\r\n                    img\r\n                );\r\n            } else {\r\n                setErrMsgNewCat(res.data.data);\r\n            }  \r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form \r\n            className='add-product-form'\r\n            onSubmit={handleTextInputChange} \r\n            autoComplete='off'\r\n            ref={form}\r\n        >\r\n            <div className='img-box'>\r\n                <input \r\n                    type='file' \r\n                    name='img' \r\n                    id='img'\r\n                    className='input-file'\r\n                    accept='image/png, image/jpeg, image/jpg'\r\n                    onChange={handleFileInputChange}\r\n                />\r\n\r\n                { previewSource ? \r\n                <figure className='img-preview-box'>\r\n                    <label htmlFor='img'>\r\n                        <img src={previewSource} alt='Preview' title='Klik untuk memilih gambar' />\r\n                    </label>\r\n                </figure>\r\n                :\r\n                <div className='placeholder-box'>\r\n                    <span><IoImageOutline /></span>\r\n                    <label htmlFor='img' className='img-btn'>Pilih Gambar</label>\r\n\r\n                </div> } \r\n                <span className='err-msg'>{errMsgImg}</span>\r\n            </div>\r\n\r\n            <div className='product-name-box'>\r\n                <label htmlFor='productName'>Nama Produk</label>\r\n                <input \r\n                    type='text' \r\n                    name='productName' \r\n                    id='productName'\r\n                    placeholder='Contoh: Sepatu, Baju'\r\n                    onChange={(e) => {\r\n                        if (errMsgProdName && e.target.value.length > 0) {\r\n                            setErrMsgProdName('');\r\n                        }\r\n                    }}\r\n                />\r\n                <span className='err-msg'>{errMsgProdName}</span>\r\n            </div>\r\n\r\n            <div className='category-box'>\r\n                <label htmlFor='category'>Pilih Kategori</label>\r\n                <div className='category-box-wraper'>\r\n                    <select \r\n                        name='category' \r\n                        id='category' \r\n                        defaultValue=''\r\n                        disabled={isSelect} \r\n                        ref={select} \r\n                        onChange={(e) => {\r\n                            if (e.target.value.length > 0) {\r\n                                setErrMsgCat('');\r\n                                setErrMsgNewCat('');\r\n                                setIsInput(true);\r\n                            }\r\n                        }}\r\n                    >\r\n                        <option disabled hidden value=''>Pilih Kategori</option>\r\n                        {arr.map(e => {\r\n                            return(\r\n                                <option \r\n                                    id={e.id} \r\n                                    value={e.id} \r\n                                    key={e.id}\r\n                                >\r\n                                    {e.name}\r\n                                </option>\r\n                            );\r\n                        })}\r\n                    </select>\r\n                    <button \r\n                        className='select-reset-btn'\r\n                        type='button'\r\n                        disabled={isSelect} \r\n                        title='Klik untuk mereset'\r\n                        onClick={()=> {\r\n                            select.current.value = '';\r\n                            setIsInput(false);\r\n                        }}\r\n                    >\r\n                        <span><GrPowerReset /></span>\r\n                    </button>\r\n                </div>\r\n                <span className='err-msg'>{errMsgCat}</span>\r\n            </div> \r\n\r\n            <div className='add-category-box'>\r\n                <label htmlFor='newCategory'>Buat Kategori Baru</label>\r\n                <input \r\n                    type='text' \r\n                    name='newCategory' \r\n                    id='newCategory' \r\n                    placeholder='contoh: Frozen'\r\n                    disabled={isInput}\r\n                    ref={inputNewCategory}\r\n                    onChange={(e) => {\r\n                        if (e.target.value.length > 0) {\r\n                            setErrMsgNewCat('');\r\n                            setErrMsgCat('');\r\n                            setIsSelect(true);\r\n                        } else {\r\n                            setIsSelect(false);\r\n                        }\r\n                    }}\r\n                />\r\n                <span className='err-msg'>{errMsgNewCat}</span>\r\n            </div>  \r\n\r\n            <div className='price-box'>\r\n                <label htmlFor='price'>Harga Produk</label>\r\n                <input \r\n                    type='text' \r\n                    name='price' \r\n                    id='price' \r\n                    placeholder='contoh: IDR 1000'\r\n                    onChange={(e) => {\r\n                        if (e.target.value.length > 0) {\r\n                            setErrMsgPrice('');\r\n                        }\r\n                    }}\r\n                />\r\n                <span className='err-msg'>{errMsgPrice}</span>\r\n            </div>\r\n                        \r\n            <div className='btn-box'>\r\n                {spinnerState ?\r\n                    <div className='spinner-box'>\r\n                        <div className={`spinner ${spinnerState}`}>\r\n                            <div className='bounce1'></div>\r\n                            <div className='bounce2'></div>\r\n                            <div className='bounce3'></div>\r\n                        </div>\r\n                    </div> \r\n                    : \r\n                    <button type='submit' className='btn-add'>\r\n                        Tambah Produk\r\n                    </button>\r\n                }\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}