{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Ecommerce-Project\\\\front-end\\\\src\\\\components\\\\dashboard\\\\main\\\\products\\\\Products.jsx\",\n    _s = $RefreshSig$();\n\nimport './Products.css';\nimport './ProductQueries.css';\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { Image } from 'cloudinary-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Products = () => {\n  _s();\n\n  const [categoryId, setCategoryId] = useState(0);\n  const arr = useSelector(state => state.getProducts);\n  const refetch = useSelector(state => state.getRefetch);\n  const toggleMenu = useSelector(state => state.getToggleMenu);\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  const axios = require('axios');\n\n  useEffect(() => {\n    // Fetch first category dynamically\n    (async () => {\n      try {\n        const res = await axios.get('http://localhost:3001/category');\n        setCategoryId(res.data.category.id);\n      } catch (err) {\n        console.error(err);\n      }\n    })();\n  }, [axios]);\n  useEffect(() => {\n    // Fetch category dynamically\n    (async () => {\n      try {\n        const res = await axios.get(`http://localhost:3001/products/${location.id ? location.id : categoryId}`);\n        const found = res.data.data.find(firstProduct => firstProduct);\n\n        if (found) {\n          dispatch({\n            type: 'SET_PRODUCT',\n            product: found\n          });\n          dispatch({\n            type: 'SET_PRODUCTS',\n            products: res.data.data\n          });\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    })();\n  }, [location, dispatch, refetch, categoryId, axios]);\n\n  const selectedProductHandler = id => {\n    // Selected product for edit\n    const found = arr.find(e => e.id === id);\n\n    if (found) {\n      dispatch({\n        type: 'SET_PRODUCT',\n        product: found\n      });\n      dispatch({\n        type: 'SET_TOGGLE_EDIT',\n        toggleEdit: true\n      });\n      dispatch({\n        type: 'SET_TOGGLE_ADD',\n        toggleAdd: false\n      });\n      dispatch({\n        type: 'SET_TOGGLE_EDIT_CATEGORY',\n        toggleEditCategory: false\n      });\n    }\n\n    toggleMenu && dispatch({\n      type: 'SET_TOGGLE_MENU',\n      toggleMenu: false\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"products-dash-container\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: arr.map(e => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"product-btn\",\n            id: e.id,\n            onClick: () => selectedProductHandler(e.id),\n            children: /*#__PURE__*/_jsxDEV(\"figure\", {\n              children: [/*#__PURE__*/_jsxDEV(Image, {\n                cloudName: \"itamarrosenblum\",\n                publicId: e.img\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n                children: e.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"$\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 32\n            }, this), e.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)]\n        }, e.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Products, \"qnIMsqz4I7VvWtF0taYlmuEDT+o=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch, useLocation];\n});\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["C:/xampp/htdocs/Ecommerce-Project/front-end/src/components/dashboard/main/products/Products.jsx"],"names":["React","useState","useEffect","useDispatch","useSelector","useLocation","Image","Products","categoryId","setCategoryId","arr","state","getProducts","refetch","getRefetch","toggleMenu","getToggleMenu","dispatch","location","axios","require","res","get","data","category","id","err","console","error","found","find","firstProduct","type","product","products","selectedProductHandler","e","toggleEdit","toggleAdd","toggleEditCategory","map","img","name","price"],"mappings":"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","sourcesContent":["import './Products.css';\r\nimport './ProductQueries.css';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Image } from 'cloudinary-react';\r\n\r\nconst Products = () => {\r\n    const [categoryId, setCategoryId] = useState(0);\r\n    const arr = useSelector(state => state.getProducts);\r\n    const refetch = useSelector(state => state.getRefetch);\r\n    const toggleMenu = useSelector(state => state.getToggleMenu);\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const axios = require('axios');\r\n\r\n    useEffect(() => { // Fetch first category dynamically\r\n        (async () => {\r\n            try {\r\n                const res = await axios.get('http://localhost:3001/category');\r\n\r\n                setCategoryId(res.data.category.id);\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })();\r\n    }, [axios]);\r\n\r\n    useEffect(() => { // Fetch category dynamically\r\n        (async () => {\r\n            try {\r\n                const res = await axios.get(`http://localhost:3001/products/${location.id ? location.id : categoryId}`);\r\n\r\n                const found = res.data.data.find (firstProduct => firstProduct);\r\n                if(found) {\r\n                    dispatch({type: 'SET_PRODUCT', product: found});\r\n                    dispatch({type: 'SET_PRODUCTS', products: res.data.data});\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })();\r\n    }, [location, dispatch, refetch, categoryId, axios]);\r\n\r\n    const selectedProductHandler = (id) => { // Selected product for edit\r\n        const found = arr.find(e => e.id === id);\r\n\r\n        if (found) {\r\n            dispatch({type: 'SET_PRODUCT', product: found});\r\n            dispatch({type: 'SET_TOGGLE_EDIT', toggleEdit: true});\r\n            dispatch({type: 'SET_TOGGLE_ADD', toggleAdd: false});\r\n            dispatch({type: 'SET_TOGGLE_EDIT_CATEGORY', toggleEditCategory: false});\r\n        }\r\n\r\n        toggleMenu && dispatch({type: 'SET_TOGGLE_MENU', toggleMenu: false});\r\n    }\r\n\r\n    return (\r\n        <div className='products-dash-container'>\r\n            <ul>\r\n                {arr.map(e => {\r\n                    return(\r\n                        <li key={e.id}>\r\n                            <button \r\n                                className='product-btn' \r\n                                id={e.id}\r\n                                onClick={() => selectedProductHandler(e.id)}\r\n                            >\r\n                                <figure>\r\n                                    <Image \r\n                                        cloudName='itamarrosenblum'\r\n                                        publicId={e.img}\r\n                                    />\r\n                                    <figcaption>{e.name}</figcaption>\r\n                                </figure>\r\n                            </button>\r\n                            <p><span>&#36;</span>{e.price}</p>\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Products;"]},"metadata":{},"sourceType":"module"}