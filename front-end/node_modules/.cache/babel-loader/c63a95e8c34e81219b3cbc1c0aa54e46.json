{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Ecommerce-Project\\\\front-end\\\\src\\\\components\\\\main\\\\nav\\\\search\\\\Search.jsx\",\n    _s = $RefreshSig$();\n\nimport './Search.css';\nimport './SearchQuerties.css';\nimport React, { useState, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { IoSearchSharp } from 'react-icons/io5';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const [searchErrMsg, setSearchErrMsg] = useState('Apa yang Anda cari?');\n  const [isBtn, setIsBtn] = useState(true);\n  const searchInput = useRef(null);\n  const dispatch = useDispatch();\n\n  const axios = require('axios');\n\n  const isValid = e => {\n    // Search validation\n    e.preventDefault();\n\n    if (e.target.search.value.length > 0) {\n      searchHandler(e.target.search.value);\n    }\n  };\n\n  const searchHandler = async productName => {\n    // Fetch product by searched name\n    try {\n      const res = await axios.post('http://localhost:3001/stock', {\n        productName: productName\n      });\n\n      if (Array.isArray(res.data.data) && res.data.data.length > 0) {\n        window.history.replaceState(null, '', `search=${productName}`);\n        dispatch({\n          type: 'SET_PRODUCTS',\n          products: res.data.data\n        });\n        dispatch({\n          type: 'SET_SEARCH_STATUS',\n          searchStatus: {\n            searchWord: searchInput.current.value,\n            resultsNumber: res.data.data.length\n          }\n        });\n      } else {\n        setSearchErrMsg(res.data.data);\n        setTimeout(() => {\n          setSearchErrMsg('Apa yang Anda cari?');\n        }, 3000);\n        searchInput.current.value = '';\n        setIsBtn(true);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: isValid,\n    className: \"search-form\",\n    autoComplete: \"off\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-box\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"search\",\n        name: \"search\",\n        maxLength: \"50\",\n        placeholder: searchErrMsg,\n        ref: searchInput,\n        onChange: e => {\n          if (e.target.value) {\n            setIsBtn(false);\n          } else {\n            setIsBtn(true);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-box\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isBtn,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(IoSearchSharp, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Search, \"5LOCp1hW/26K6OfO6Ry8i5R3jVE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["C:/xampp/htdocs/Ecommerce-Project/front-end/src/components/main/nav/search/Search.jsx"],"names":["React","useState","useRef","useDispatch","IoSearchSharp","Search","searchErrMsg","setSearchErrMsg","isBtn","setIsBtn","searchInput","dispatch","axios","require","isValid","e","preventDefault","target","search","value","length","searchHandler","productName","res","post","Array","isArray","data","window","history","replaceState","type","products","searchStatus","searchWord","current","resultsNumber","setTimeout","err","console","error"],"mappings":"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","sourcesContent":["import './Search.css';\r\nimport './SearchQuerties.css';\r\nimport React, { useState, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { IoSearchSharp } from 'react-icons/io5';\r\n\r\nconst Search = () => {\r\n    const [searchErrMsg, setSearchErrMsg] = useState('Apa yang Anda cari?');\r\n    const [isBtn, setIsBtn] = useState(true);\r\n    const searchInput = useRef(null);\r\n    const dispatch = useDispatch();\r\n    const axios = require('axios');\r\n\r\n    const isValid = (e) => { // Search validation\r\n        e.preventDefault();\r\n\r\n        if (e.target.search.value.length > 0) {\r\n            searchHandler(e.target.search.value);\r\n        }\r\n    }\r\n\r\n    const searchHandler = async (productName) => { // Fetch product by searched name\r\n        try {\r\n            const res = await axios.post('http://localhost:3001/stock',\r\n            {productName: productName});\r\n            \r\n            if (Array.isArray(res.data.data) && res.data.data.length > 0) {\r\n                window.history.replaceState(null, '', `search=${productName}`);\r\n                dispatch({type: 'SET_PRODUCTS', products: res.data.data});\r\n                dispatch({type: 'SET_SEARCH_STATUS', searchStatus: {searchWord: searchInput.current.value, resultsNumber: res.data.data.length} });\r\n            } else {\r\n                setSearchErrMsg(res.data.data);\r\n                setTimeout(() => { setSearchErrMsg('Apa yang Anda cari?'); }, 3000);\r\n                searchInput.current.value = '';\r\n                setIsBtn(true);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={isValid} className='search-form' autoComplete='off'>\r\n            <div className='search-box'>\r\n                <input \r\n                    type='search' \r\n                    name='search' \r\n                    maxLength='50'\r\n                    placeholder={searchErrMsg} \r\n                    ref={searchInput}\r\n                    onChange={(e) => {\r\n                        if (e.target.value) {\r\n                            setIsBtn(false);\r\n                        } else {\r\n                            setIsBtn(true);\r\n                        }\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <div className='btn-box'>\r\n                <button type='submit' disabled={isBtn}>\r\n                    <span><IoSearchSharp /></span>\r\n                </button>\r\n            </div>\r\n        </form> \r\n    );\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}